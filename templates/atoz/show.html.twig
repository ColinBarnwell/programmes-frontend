{% extends 'base_ds2013.html.twig' %}

{% block inline_head %}{% if selectedLetter is empty %}<meta name="robots" content="noindex,nofollow">{% endif %}{% endblock %}
{%- block title -%}
    BBC -
    {%- if slice == 'all' -%}
        {{ ' ' ~ tr('atoz_all') ~ ' ' }}
    {%- else -%}
        {{ ' ' ~ tr('atoz_available') ~ ' ' }}
    {%- endif -%}
    - {{ tr('atoz_title') }},
    {%- if selectedLetter is empty -%}
        {{ ' ' ~ search }}
    {%- else -%}
        {{ ' ' ~ selectedLetter|upper }}
    {%- endif -%}
{%- endblock -%}
{% block page_classes %}programmes-page text-base b-g-p br-box-page{% endblock %}

{% block body %}
    {% if selectedLetter is empty %}
        <h1>{{ tr('atoz_search_title', { '%1': search }) }}</h1>
        {{ ds2013('atozSearchBar', search, slice) }}
    {% else %}
        <h1>{% if slice == 'all' %}{{ tr('atoz_title_all') }}{% else %}{{ tr('atoz_title_available') }}{% endif %} - {{ selectedLetter|upper }}</h1>
        {{ ds2013('atozLetterNav', selectedLetter, slice) }}
    {% endif %}
    {{ ds2013('atozSliceNav', search, slice) }}
    <div class="g-c-l">
        {% if results is not empty %}
            <ol class="highlight-box-wrapper grid-wrapper">
                {% for result in results %}
                    {% if selectedLetter is empty %}
                        {% set programme = result %}
                    {% else %}
                        {% set programme = result.getTitledEntity() %}
                    {% endif %}
                    <li class="grid 1/1 atoz-title">
                        {{ ds2013('programme', programme, {
                            'highlight_box_classes': 'highlight-box--list',
                            'title_options': {
                                'title_tag': 'h2',
                                'title_classes': 'delta'
                            },
                            'image_options': {
                                'classes': '1/4@bpb1 1/4@bpb2 1/3@bpw',
                                'default_width': 160,
                                'is_lazy_loaded': true
                            },
                            'body_options': {
                                'show_masterbrand': true,
                                'show_child_availability': true
                            }
                        }) }}
                    </li>
                {% endfor %}
            </ol>
        {% else %}
            <p class="nothingtoshow">
                {%- if selectedLetter is not empty -%}
                    {{ tr('atoz_noresults', { '%1': selectedLetter|upper }) }}
                {%- else -%}
                    {{ tr('atoz_nocontaining', { '%1': '"' ~ search ~ '"' }) }}
                {%- endif -%}
                .
                {%- if slice == 'player' -%}
                    {{ (' ' ~ tr('atoz_tryall', {
                        '%1': '<a rel="rdfs:seeAlso" href="' ~ path('atoz_show', { 'search': search, 'slice': 'all' }) ~ '">',
                        '%2': '</a>'
                    }) ~ '.')|raw }}
                {%- endif -%}
            </p>
        {% endif %}
    </div>
    {%- if paginator is not null -%}
        {{ ds2013_presenter(paginator) }}
    {%- endif -%}
{% endblock %}

{% extends '@Twig/Exception/error.html.twig' %}

{% block title %}{{ tr('page_not_found_title') }}{% endblock %}

{% block image %}{{ asset('images/error/clanger_error.gif') }}{% endblock %}
{% block pagenote %}{{ tr('page_not_found_note') }}{% endblock %}

{% block javascripts %}
    <script>
        const trigger = document.getElementsByClassName('grid')[1];
        trigger.addEventListener('click', () => {
            require(['pixi'], PIXI => {
                let type = 'WebGL';
                if (!PIXI.utils.isWebGLSupported()) {
                    type = 'canvas';
                }

                const app = new PIXI.Application({
                    width: window.innerWidth,
                    height: window.innerHeight,
                    backgroundColor: 0x000000,
                    resolution: window.devicePixelRatio || 1,
                    autoResize: true
                });

                const view = app.view;
                const element = document.getElementsByClassName('programmes-page')[0];
                element.parentElement.replaceChild(view, element);
                view.scrollIntoView(true);

                const container = new PIXI.Container();
                app.stage.addChild(container);

                const screenWidth = app.screen.width

                const moonSize = screenWidth * 2;
                const moon = new PIXI.Graphics()
                    .beginFill(0xFFFFFF)
                    .drawCircle(moonSize, moonSize, moonSize)
                    .beginFill(0xFF0000)
                    .drawStar(moonSize, moonSize, 5, moonSize);
                container.addChild(moon);

                container.x = screenWidth / 2;
                container.y = (app.screen.height / 2) + moonSize * 1.1;

                container.pivot.x = container.width / 2;
                container.pivot.y = container.height / 2;

                app.ticker.add(delta => {
                    container.rotation -= 0.005 * delta;
                });
            });
        }, { once: true });
    </script>
{% endblock %}
